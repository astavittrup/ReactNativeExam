{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Chatroom } from \"../../entities/Chatroom\";\nexport var TOGGLE_HAPPY = 'TOGGLE_HAPPY';\nexport var ADD = 'ADD';\nexport var SUBTRACT = 'SUBTRACT';\nexport var ADD_CHATROOM = 'ADD_CHATROOM';\nexport var DELETE_CHATROOM = 'DELETE_CHATROOM';\nexport var FETCH_CHATROOMS = 'FETCH_CHATROOMS';\nexport var toggleHappy = function toggleHappy() {\n  return {\n    type: TOGGLE_HAPPY\n  };\n};\nexport var add = function add() {\n  return {\n    type: ADD\n  };\n};\nexport var subtract = function subtract() {\n  return {\n    type: SUBTRACT\n  };\n};\nexport var fetchChatrooms = function fetchChatrooms() {\n  return function _callee(dispatch, getState) {\n    var idToken, response, data, chatrooms, key, chatroom;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            idToken = getState().user.idToken;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fetch('https://cbsstudentsweb-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth=' + idToken, {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 3:\n            response = _context.sent;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 6:\n            data = _context.sent;\n            console.log(data);\n\n            if (!response.ok) {} else {\n              chatrooms = [];\n\n              for (key in data) {\n                chatroom = new Chatroom(data[key].chatroomName, [], '', key);\n                chatrooms.push(chatroom);\n              }\n\n              dispatch({\n                type: FETCH_CHATROOMS,\n                payload: chatrooms\n              });\n            }\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\nexport var addChatroom = function addChatroom(chatroomName) {\n  return function _callee2(dispatch, getState) {\n    var idToken, response, data;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            idToken = getState().user.idToken;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(fetch('https://cbsstudentsweb-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth=' + idToken, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                chatroomName: chatroomName\n              })\n            }));\n\n          case 3:\n            response = _context2.sent;\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 6:\n            data = _context2.sent;\n            console.log(data);\n\n            if (!response.ok) {} else {\n              dispatch({\n                type: ADD_CHATROOM,\n                payload: {\n                  chatroomName: chatroomName,\n                  id: data.name\n                }\n              });\n            }\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\nexport var deleteChatroom = function deleteChatroom(id) {\n  return function _callee3(dispatch, getState) {\n    var idToken, response, data;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            idToken = getState().user.idToken;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(fetch('https://cbsstudentsweb-default-rtdb.europe-west1.firebasedatabase.app/chatrooms/' + id + '.json/?auth=' + idToken, {\n              method: 'DELETE',\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 3:\n            response = _context3.sent;\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 6:\n            data = _context3.sent;\n            console.log(data);\n\n            if (!response.ok) {} else {\n              dispatch({\n                type: DELETE_CHATROOM,\n                payload: id\n              });\n            }\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};","map":{"version":3,"sources":["/Users/astavittrupgraversen/react_native/store/actions/ChatActions.ts"],"names":["Chatroom","TOGGLE_HAPPY","ADD","SUBTRACT","ADD_CHATROOM","DELETE_CHATROOM","FETCH_CHATROOMS","toggleHappy","type","add","subtract","fetchChatrooms","dispatch","getState","idToken","user","fetch","method","headers","response","json","data","console","log","ok","chatrooms","key","chatroom","chatroomName","push","payload","addChatroom","body","JSON","stringify","id","name","deleteChatroom"],"mappings":"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","sourcesContent":["import { Chatroom } from \"../../entities/Chatroom\";\n\nexport const TOGGLE_HAPPY = 'TOGGLE_HAPPY';\nexport const ADD = 'ADD';\nexport const SUBTRACT = 'SUBTRACT';\nexport const ADD_CHATROOM = 'ADD_CHATROOM';\nexport const DELETE_CHATROOM = 'DELETE_CHATROOM';\nexport const FETCH_CHATROOMS = 'FETCH_CHATROOMS';\n\nexport const toggleHappy = () => {\n    return { type: TOGGLE_HAPPY };\n};\n\nexport const add = () => {\n    return { type: ADD };\n};\n\nexport const subtract = () => {\n    return { type: SUBTRACT };\n};\n\nexport const fetchChatrooms = () => {\n    return async (dispatch: any, getState: any) => {\n        const idToken = getState().user.idToken\n\n        const response = await fetch(\n            'https://cbsstudentsweb-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth='\n            + idToken, {\n\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n\n\n        const data = await response.json(); // json to javascript\n        console.log(data);\n        if (!response.ok) {\n            //There was a problem..\n        } else {\n\n            let chatrooms = [];\n            for (const key in data) {\n                let chatroom = new Chatroom(data[key].chatroomName, [], '', key)\n                chatrooms.push(chatroom)\n            }\n\n            dispatch({ type: FETCH_CHATROOMS, payload: chatrooms })\n        }\n    };\n}\n\nexport const addChatroom = (chatroomName: string) => {\n    return async (dispatch: any, getState: any) => {\n        // const msg: Chatmessage = new Chatmessage('Hello', new Date()); //example of using typescript\n        const idToken = getState().user.idToken\n\n        const response = await fetch(\n            'https://cbsstudentsweb-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth='\n            + idToken, {\n\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ //javascript to json\n                //key value pairs of data you want to send to server\n                // ...\n                chatroomName\n            })\n        });\n\n\n        const data = await response.json(); // json to javascript\n        console.log(data);\n        if (!response.ok) {\n            //There was a problem..\n        } else {\n            dispatch({ type: ADD_CHATROOM, payload: { chatroomName, id: data.name } })\n        }\n    };\n};\n\nexport const deleteChatroom = (id: string) => {\n    return async (dispatch: any, getState: any) => {\n        let idToken: string = getState().user.idToken\n\n        const response = await fetch(\n            'https://cbsstudentsweb-default-rtdb.europe-west1.firebasedatabase.app/chatrooms/' + id + '.json/?auth='\n            + idToken, {\n\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        });\n\n\n        const data = await response.json(); // json to javascript\n        console.log(data);\n        if (!response.ok) {\n            //There was a problem..\n        } else {\n            dispatch({ type: DELETE_CHATROOM, payload: id })\n        }\n    };\n}\n\n"]},"metadata":{},"sourceType":"module"}