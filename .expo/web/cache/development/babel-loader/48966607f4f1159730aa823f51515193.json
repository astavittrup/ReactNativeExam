{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toggleHappy = exports.subtract = exports.fetchChatrooms = exports.deleteChatroom = exports.addChatroom = exports.add = exports.TOGGLE_HAPPY = exports.SUBTRACT = exports.FETCH_CHATROOMS = exports.DELETE_CHATROOM = exports.ADD_CHATROOM = exports.ADD = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _Chatroom = require(\"../../entities/Chatroom\");\n\nvar TOGGLE_HAPPY = 'TOGGLE_HAPPY';\nexports.TOGGLE_HAPPY = TOGGLE_HAPPY;\nvar ADD = 'ADD';\nexports.ADD = ADD;\nvar SUBTRACT = 'SUBTRACT';\nexports.SUBTRACT = SUBTRACT;\nvar ADD_CHATROOM = 'ADD_CHATROOM';\nexports.ADD_CHATROOM = ADD_CHATROOM;\nvar DELETE_CHATROOM = 'DELETE_CHATROOM';\nexports.DELETE_CHATROOM = DELETE_CHATROOM;\nvar FETCH_CHATROOMS = 'FETCH_CHATROOMS';\nexports.FETCH_CHATROOMS = FETCH_CHATROOMS;\n\nvar toggleHappy = function toggleHappy() {\n  return {\n    type: TOGGLE_HAPPY\n  };\n};\n\nexports.toggleHappy = toggleHappy;\n\nvar add = function add() {\n  return {\n    type: ADD\n  };\n};\n\nexports.add = add;\n\nvar subtract = function subtract() {\n  return {\n    type: SUBTRACT\n  };\n};\n\nexports.subtract = subtract;\n\nvar fetchChatrooms = function fetchChatrooms() {\n  return function _callee(dispatch, getState) {\n    var idToken, response, data, chatrooms, key, chatroom;\n    return _regenerator.default.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            idToken = getState().user.idToken;\n            _context.next = 3;\n            return _regenerator.default.awrap(fetch('https://reactnative-ce12d-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth=' + idToken, {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 3:\n            response = _context.sent;\n            _context.next = 6;\n            return _regenerator.default.awrap(response.json());\n\n          case 6:\n            data = _context.sent;\n            console.log(data);\n\n            if (!response.ok) {} else {\n              chatrooms = [];\n\n              for (key in data) {\n                chatroom = new _Chatroom.Chatroom(data[key].chatroomName, [], '', key);\n                chatrooms.push(chatroom);\n              }\n\n              dispatch({\n                type: FETCH_CHATROOMS,\n                payload: chatrooms\n              });\n            }\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nexports.fetchChatrooms = fetchChatrooms;\n\nvar addChatroom = function addChatroom(chatroomName) {\n  return function _callee2(dispatch, getState) {\n    var idToken, response, data;\n    return _regenerator.default.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            idToken = getState().user.idToken;\n            console.log(idToken);\n            _context2.next = 4;\n            return _regenerator.default.awrap(fetch('https://reactnative-ce12d-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth=' + idToken, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                chatroomName: chatroomName\n              })\n            }));\n\n          case 4:\n            response = _context2.sent;\n            _context2.next = 7;\n            return _regenerator.default.awrap(response.json());\n\n          case 7:\n            data = _context2.sent;\n            console.log(\"This is the data:\", data);\n\n            if (!response.ok) {} else {\n              dispatch({\n                type: ADD_CHATROOM,\n                payload: {\n                  chatroomName: chatroomName,\n                  id: data.name\n                }\n              });\n            }\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nexports.addChatroom = addChatroom;\n\nvar deleteChatroom = function deleteChatroom(id) {\n  return function _callee3(dispatch, getState) {\n    var idToken, response, data;\n    return _regenerator.default.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            idToken = getState().user.idToken;\n            _context3.next = 3;\n            return _regenerator.default.awrap(fetch('https://reactnative-ce12d-default-rtdb.europe-west1.firebasedatabase.app/chatrooms/' + id + '.json/?auth=' + idToken, {\n              method: 'DELETE',\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            }));\n\n          case 3:\n            response = _context3.sent;\n            _context3.next = 6;\n            return _regenerator.default.awrap(response.json());\n\n          case 6:\n            data = _context3.sent;\n            console.log(data);\n\n            if (!response.ok) {} else {\n              dispatch({\n                type: DELETE_CHATROOM,\n                payload: id\n              });\n            }\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nexports.deleteChatroom = deleteChatroom;","map":{"version":3,"names":["TOGGLE_HAPPY","ADD","SUBTRACT","ADD_CHATROOM","DELETE_CHATROOM","FETCH_CHATROOMS","toggleHappy","type","add","subtract","fetchChatrooms","dispatch","getState","idToken","user","fetch","method","headers","response","json","data","console","log","ok","chatrooms","key","chatroom","Chatroom","chatroomName","push","payload","addChatroom","body","JSON","stringify","id","name","deleteChatroom"],"sources":["/Users/astavittrupgraversen/repo/ReactNativeExam/store/actions/ChatActions.ts"],"sourcesContent":["import { Chatroom } from \"../../entities/Chatroom\";\n\nexport const TOGGLE_HAPPY = 'TOGGLE_HAPPY';\nexport const ADD = 'ADD';\nexport const SUBTRACT = 'SUBTRACT';\nexport const ADD_CHATROOM = 'ADD_CHATROOM';\nexport const DELETE_CHATROOM = 'DELETE_CHATROOM';\nexport const FETCH_CHATROOMS = 'FETCH_CHATROOMS';\n\nexport const toggleHappy = () => {\n    return { type: TOGGLE_HAPPY };\n};\n\nexport const add = () => {\n    return { type: ADD };\n};\n\nexport const subtract = () => {\n    return { type: SUBTRACT };\n};\n\nexport const fetchChatrooms = () => {\n    return async (dispatch: any, getState: any) => {\n        const idToken = getState().user.idToken\n\n        const response = await fetch(\n            'https://reactnative-ce12d-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth='\n            + idToken, {\n\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n\n\n        const data = await response.json(); // json to javascript\n        console.log(data);\n        if (!response.ok) {\n            //There was a problem..\n        } else {\n\n            let chatrooms = [];\n            for (const key in data) {\n                let chatroom = new Chatroom(data[key].chatroomName, [], '', key)\n                chatrooms.push(chatroom)\n            }\n\n            dispatch({ type: FETCH_CHATROOMS, payload: chatrooms })\n        }\n    };\n}\n\nexport const addChatroom = (chatroomName: string) => {\n    return async (dispatch: any, getState: any) => {\n        // const msg: Chatmessage = new Chatmessage('Hello', new Date()); //example of using typescript\n        const idToken = getState().user.idToken\nconsole.log(idToken)\n        const response = await fetch(\n            'https://reactnative-ce12d-default-rtdb.europe-west1.firebasedatabase.app/chatrooms.json?auth='\n            + idToken, {\n\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ //javascript to json\n                //key value pairs of data you want to send to server\n                // ...\n                chatroomName\n            })\n        });\n\n\n        const data = await response.json(); // json to javascript\n        console.log(\"This is the data:\", data);\n        if (!response.ok) {\n            //There was a problem..\n        } else {\n            dispatch({ type: ADD_CHATROOM, payload: { chatroomName, id: data.name } })\n        }\n    };\n};\n\nexport const deleteChatroom = (id: string) => {\n    return async (dispatch: any, getState: any) => {\n        let idToken: string = getState().user.idToken\n\n        const response = await fetch(\n            'https://reactnative-ce12d-default-rtdb.europe-west1.firebasedatabase.app/chatrooms/' + id + '.json/?auth='\n            + idToken, {\n\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        });\n\n\n        const data = await response.json(); // json to javascript\n        console.log(data);\n        if (!response.ok) {\n            //There was a problem..\n        } else {\n            dispatch({ type: DELETE_CHATROOM, payload: id })\n        }\n    };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}